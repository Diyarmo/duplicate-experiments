schema: '2.0'
stages:
  train_siamese_simple_bilstm_general_queue:
    cmd: "python ../../src/train.py params.yaml siamese_simple_bilstm ../../storage/data/prepared/general_train.parquet\
      \ ../../storage/data/prepared/general_val.parquet ../../storage/models/tokenizers/tokenizer_general.json\
      \ ../../storage/models/categorical_encodings/general_categories_encoding.npy\
      \ ../../storage/models/categorical_encodings/general_cities_encoding.npy\n"
    deps:
    - path: ../../src/modeling/siamese_simple_bilstm/data.py
      md5: 98f46c5f712138a5c24dee77520db90c
      size: 6416
    - path: ../../src/modeling/siamese_simple_bilstm/model.py
      md5: 0c3bd48907349a3365533f4c60d7b666
      size: 8614
    - path: ../../src/train.py
      md5: 66b4d85e0c1ad7d88f31dcbf1c83fe34
      size: 2173
    - path: ../../storage/data/prepared/general_train.parquet
      md5: f7298805fe8fe3c80b7e2fc9fbe8f12f
      size: 1434369755
    - path: ../../storage/data/prepared/general_val.parquet
      md5: 69f86c56689eaa9d5d83fe3c95470ec3
      size: 3194175235
    - path: ../../storage/models/categorical_encodings/general_categories_encoding.npy
      md5: 55be1adf9d6238d9fd20ee485201e6e4
      size: 4882
    - path: ../../storage/models/categorical_encodings/general_cities_encoding.npy
      md5: 73df39d8131fcef1cb2b8c1fcafd78c2
      size: 4537
    - path: ../../storage/models/tokenizers/tokenizer_general.json
      md5: 69a183a40824b3d2d38f6cfc3559ca4e
      size: 1342740
    params:
      params.yaml:
        siamese_simple_bilstm.initial_lr: 0.001
        siamese_simple_bilstm.max_epochs: 5
        siamese_simple_bilstm.output_feature_dim: 296
        siamese_simple_bilstm.text_embed_dim: 128
        siamese_simple_bilstm.text_max_length: 512
        siamese_simple_bilstm.text_num_layers: 2
    outs:
    - path: ../../storage/models/siamese_simple_bilstm_general_model.ckpt
      md5: d921136ab4d62dccea851394b5c1d33c
      size: 81128508
  evaluate_simple_bilstm_general_queue:
    cmd: "python ../../src/evaluate.py siamese_simple_bilstm ../../storage/data/prepared/general_val.parquet\
      \ ../../storage/models/tokenizers/tokenizer_general.json ../../storage/models/categorical_encodings/general_categories_encoding.npy\
      \ ../../storage/models/categorical_encodings/general_cities_encoding.npy ../../storage/models/siamese_simple_bilstm_general_model.ckpt\n"
    deps:
    - path: ../../src/evaluate.py
      md5: c2583ac7ff24a05f0afdfed716771ea9
      size: 3853
    - path: ../../src/modeling/siamese_simple_bilstm/evaluate.py
      md5: 210390f0c33fa6cad812c6255ef32eef
      size: 1166
    - path: ../../storage/data/prepared/general_val.parquet
      md5: 69f86c56689eaa9d5d83fe3c95470ec3
      size: 3194175235
    - path: ../../storage/models/categorical_encodings/general_categories_encoding.npy
      md5: 55be1adf9d6238d9fd20ee485201e6e4
      size: 4882
    - path: ../../storage/models/categorical_encodings/general_cities_encoding.npy
      md5: 73df39d8131fcef1cb2b8c1fcafd78c2
      size: 4537
    - path: ../../storage/models/siamese_simple_bilstm_general_model.ckpt
      md5: d921136ab4d62dccea851394b5c1d33c
      size: 81128508
    - path: ../../storage/models/tokenizers/tokenizer_general.json
      md5: 69a183a40824b3d2d38f6cfc3559ca4e
      size: 1342740
    outs:
    - path: ../../logs/siamese_simple_bilstm_general_scores_file.json
      md5: d32fa55456e39bfd91e9cbc9fe9868cd
      size: 27
    - path: ../../storage/data/prepared/siamese_simple_bilstm_general_val_with_preds.parquet
      md5: 21bfa3c6608af09f1203bcd69d3953f7
      size: 229474424
  update_readme:
    cmd: "python ../../src/update_readme.py params.yaml ../basic/params.yaml siamese_simple_bilstm\
      \ ../../logs/siamese_simple_bilstm_general_scores_file.json\n"
    deps:
    - path: ../../logs/siamese_simple_bilstm_general_scores_file.json
      md5: d32fa55456e39bfd91e9cbc9fe9868cd
      size: 27
    - path: ../../src/update_readme.py
      md5: 9931629472c9978ed5116d481997e900
      size: 1381
    - path: ../../storage/data/prepared/siamese_simple_bilstm_general_val_with_preds.parquet
      md5: 21bfa3c6608af09f1203bcd69d3953f7
      size: 229474424
